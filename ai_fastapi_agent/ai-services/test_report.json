{
  "timestamp": "2025-07-28T01:54:19.944419",
  "summary": {
    "total_suites": 9,
    "passed_suites": 2,
    "failed_suites": 7
  },
  "details": {
    "Data Models": {
      "success": true,
      "output": "============================= test session starts ==============================\nplatform darwin -- Python 3.11.6, pytest-7.4.3, pluggy-1.6.0 -- /Users/unbxd/Desktop/judwaa/airavat/airavat/bin/python\ncachedir: .pytest_cache\nrootdir: /Users/unbxd/Desktop/judwaa/airavat/ai_fastapi_agent/ai-services\nplugins: anyio-4.9.0, Faker-20.1.0, cov-4.1.0, asyncio-0.21.1, langsmith-0.4.8\nasyncio: mode=Mode.STRICT\ncollecting ... collected 4 items\n\ntest_components.py::TestDataModels::test_patient_query_validation PASSED [ 25%]\ntest_components.py::TestDataModels::test_agent_response_validation PASSED [ 50%]\ntest_components.py::TestDataModels::test_feedback_data_validation PASSED [ 75%]\ntest_components.py::TestDataModels::test_treatment_plan_update_validation PASSED [100%]\n\n============================== 4 passed in 0.26s ===============================\n",
      "errors": ""
    },
    "Intent Detector": {
      "success": false,
      "output": "============================= test session starts ==============================\nplatform darwin -- Python 3.11.6, pytest-7.4.3, pluggy-1.6.0 -- /Users/unbxd/Desktop/judwaa/airavat/airavat/bin/python\ncachedir: .pytest_cache\nrootdir: /Users/unbxd/Desktop/judwaa/airavat/ai_fastapi_agent/ai-services\nplugins: anyio-4.9.0, Faker-20.1.0, cov-4.1.0, asyncio-0.21.1, langsmith-0.4.8\nasyncio: mode=Mode.STRICT\ncollecting ... collected 3 items\n\ntest_components.py::TestIntentDetector::test_intent_detection PASSED     [ 33%]\ntest_components.py::TestIntentDetector::test_intent_confidence FAILED    [ 66%]\ntest_components.py::TestIntentDetector::test_entity_extraction PASSED    [100%]\n\n=================================== FAILURES ===================================\n__________________ TestIntentDetector.test_intent_confidence ___________________\ntest_components.py:137: in test_intent_confidence\n    assert confidence > 0.5\nE   assert 0.2777777777777778 > 0.5\n=========================== short test summary info ============================\nFAILED test_components.py::TestIntentDetector::test_intent_confidence - asser...\n========================= 1 failed, 2 passed in 0.20s ==========================\n",
      "errors": ""
    },
    "Firestore Service": {
      "success": false,
      "output": "============================= test session starts ==============================\nplatform darwin -- Python 3.11.6, pytest-7.4.3, pluggy-1.6.0 -- /Users/unbxd/Desktop/judwaa/airavat/airavat/bin/python\ncachedir: .pytest_cache\nrootdir: /Users/unbxd/Desktop/judwaa/airavat/ai_fastapi_agent/ai-services\nplugins: anyio-4.9.0, Faker-20.1.0, cov-4.1.0, asyncio-0.21.1, langsmith-0.4.8\nasyncio: mode=Mode.STRICT\ncollecting ... collected 2 items\n\ntest_components.py::TestFirestoreService::test_firestore_initialization PASSED [ 50%]\ntest_components.py::TestFirestoreService::test_patient_context_retrieval FAILED [100%]\n\n=================================== FAILURES ===================================\n_____________ TestFirestoreService.test_patient_context_retrieval ______________\ntest_components.py:181: in test_patient_context_retrieval\n    context = service.get_patient_context(TEST_PATIENT_ID)\nE   AttributeError: 'FirestoreService' object has no attribute 'get_patient_context'\n=========================== short test summary info ============================\nFAILED test_components.py::TestFirestoreService::test_patient_context_retrieval\n========================= 1 failed, 1 passed in 0.56s ==========================\n",
      "errors": ""
    },
    "Genetic Analysis": {
      "success": false,
      "output": "============================= test session starts ==============================\nplatform darwin -- Python 3.11.6, pytest-7.4.3, pluggy-1.6.0 -- /Users/unbxd/Desktop/judwaa/airavat/airavat/bin/python\ncachedir: .pytest_cache\nrootdir: /Users/unbxd/Desktop/judwaa/airavat/ai_fastapi_agent/ai-services\nplugins: anyio-4.9.0, Faker-20.1.0, cov-4.1.0, asyncio-0.21.1, langsmith-0.4.8\nasyncio: mode=Mode.STRICT\ncollecting ... collected 2 items\n\ntest_components.py::TestGeneticAnalysisService::test_genetic_service_initialization PASSED [ 50%]\ntest_components.py::TestGeneticAnalysisService::test_file_validation FAILED [100%]\n\n=================================== FAILURES ===================================\n_______________ TestGeneticAnalysisService.test_file_validation ________________\ntest_components.py:203: in test_file_validation\n    assert service._is_valid_file(\"test.pdf\") is True\nE   AttributeError: 'GeneticAnalysisService' object has no attribute '_is_valid_file'\n------------------------------ Captured log call -------------------------------\nWARNING  google.auth.compute_engine._metadata:_metadata.py:142 Compute Engine Metadata server unavailable on attempt 1 of 3. Reason: [Errno 64] Host is down\nWARNING  google.auth.compute_engine._metadata:_metadata.py:142 Compute Engine Metadata server unavailable on attempt 2 of 3. Reason: [Errno 64] Host is down\nWARNING  google.auth.compute_engine._metadata:_metadata.py:142 Compute Engine Metadata server unavailable on attempt 3 of 3. Reason: [Errno 64] Host is down\nWARNING  google.auth._default:_default.py:362 Authentication failed using Compute Engine authentication due to unavailable metadata server.\nWARNING  main_agent.genetic_analysis_service:genetic_analysis_service.py:104 Google Cloud Storage not available: Your default credentials were not found. To set up Application Default Credentials, see https://cloud.google.com/docs/authentication/external/set-up-adc for more information.\n=============================== warnings summary ===============================\ntest_components.py::TestGeneticAnalysisService::test_genetic_service_initialization\n  /Users/unbxd/Desktop/judwaa/airavat/airavat/lib/python3.11/site-packages/PyPDF2/__init__.py:21: DeprecationWarning: PyPDF2 is deprecated. Please move to the pypdf library instead.\n    warnings.warn(\n\n-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html\n=========================== short test summary info ============================\nFAILED test_components.py::TestGeneticAnalysisService::test_file_validation\n=================== 1 failed, 1 passed, 1 warning in 16.92s ====================\n",
      "errors": ""
    },
    "Notification Service": {
      "success": false,
      "output": "============================= test session starts ==============================\nplatform darwin -- Python 3.11.6, pytest-7.4.3, pluggy-1.6.0 -- /Users/unbxd/Desktop/judwaa/airavat/airavat/bin/python\ncachedir: .pytest_cache\nrootdir: /Users/unbxd/Desktop/judwaa/airavat/ai_fastapi_agent/ai-services\nplugins: anyio-4.9.0, Faker-20.1.0, cov-4.1.0, asyncio-0.21.1, langsmith-0.4.8\nasyncio: mode=Mode.STRICT\ncollecting ... collected 1 item\n\ntest_components.py::TestNotificationService::test_notification_creation FAILED [100%]\n\n=================================== FAILURES ===================================\n______________ TestNotificationService.test_notification_creation ______________\ntest_components.py:234: in test_notification_creation\n    result = service.create_notification(notification_data)\nE   AttributeError: 'NotificationService' object has no attribute 'create_notification'\n------------------------------ Captured log call -------------------------------\nERROR    main_agent.email_service:email_service.py:58 Failed to initialize Firestore: The default Firebase app does not exist. Make sure to initialize the SDK by calling initialize_app().\nERROR    main_agent.email_service:email_service.py:58 Failed to initialize Firestore: The default Firebase app does not exist. Make sure to initialize the SDK by calling initialize_app().\n=========================== short test summary info ============================\nFAILED test_components.py::TestNotificationService::test_notification_creation\n============================== 1 failed in 0.67s ===============================\n",
      "errors": ""
    },
    "Email Service": {
      "success": true,
      "output": "============================= test session starts ==============================\nplatform darwin -- Python 3.11.6, pytest-7.4.3, pluggy-1.6.0 -- /Users/unbxd/Desktop/judwaa/airavat/airavat/bin/python\ncachedir: .pytest_cache\nrootdir: /Users/unbxd/Desktop/judwaa/airavat/ai_fastapi_agent/ai-services\nplugins: anyio-4.9.0, Faker-20.1.0, cov-4.1.0, asyncio-0.21.1, langsmith-0.4.8\nasyncio: mode=Mode.STRICT\ncollecting ... collected 2 items\n\ntest_components.py::TestEmailService::test_email_service_initialization PASSED [ 50%]\ntest_components.py::TestEmailService::test_email_template_rendering PASSED [100%]\n\n============================== 2 passed in 0.62s ===============================\n",
      "errors": ""
    },
    "RL Service": {
      "success": false,
      "output": "============================= test session starts ==============================\nplatform darwin -- Python 3.11.6, pytest-7.4.3, pluggy-1.6.0 -- /Users/unbxd/Desktop/judwaa/airavat/airavat/bin/python\ncachedir: .pytest_cache\nrootdir: /Users/unbxd/Desktop/judwaa/airavat/ai_fastapi_agent/ai-services\nplugins: anyio-4.9.0, Faker-20.1.0, cov-4.1.0, asyncio-0.21.1, langsmith-0.4.8\nasyncio: mode=Mode.STRICT\ncollecting ... collected 3 items\n\ntest_components.py::TestRLService::test_rl_agent_initialization PASSED   [ 33%]\ntest_components.py::TestRLService::test_severity_level_detection FAILED  [ 66%]\ntest_components.py::TestRLService::test_reward_calculation PASSED        [100%]\n\n=================================== FAILURES ===================================\n_________________ TestRLService.test_severity_level_detection __________________\ntest_components.py:283: in test_severity_level_detection\n    assert determine_severity_level(\"mild headache\") == \"low\"\nE   AssertionError: assert 0 == 'low'\nE    +  where 0 = <function determine_severity_level at 0x10668eca0>('mild headache')\n=========================== short test summary info ============================\nFAILED test_components.py::TestRLService::test_severity_level_detection - Ass...\n========================= 1 failed, 2 passed in 0.38s ==========================\n",
      "errors": ""
    },
    "Planner": {
      "success": false,
      "output": "============================= test session starts ==============================\nplatform darwin -- Python 3.11.6, pytest-7.4.3, pluggy-1.6.0 -- /Users/unbxd/Desktop/judwaa/airavat/airavat/bin/python\ncachedir: .pytest_cache\nrootdir: /Users/unbxd/Desktop/judwaa/airavat/ai_fastapi_agent/ai-services\nplugins: anyio-4.9.0, Faker-20.1.0, cov-4.1.0, asyncio-0.21.1, langsmith-0.4.8\nasyncio: mode=Mode.STRICT\ncollecting ... collected 1 item\n\ntest_components.py::TestPlanner::test_dynamic_plan_generation FAILED     [100%]\n\n=================================== FAILURES ===================================\n___________________ TestPlanner.test_dynamic_plan_generation ___________________\ntest_components.py:312: in test_dynamic_plan_generation\n    plan = generate_dynamic_plan(patient_context)\nE   TypeError: generate_dynamic_plan() missing 2 required positional arguments: 'current_patient_context' and 'firestore_service'\n=========================== short test summary info ============================\nFAILED test_components.py::TestPlanner::test_dynamic_plan_generation - TypeEr...\n============================== 1 failed in 0.74s ===============================\n",
      "errors": ""
    },
    "Gemini Service": {
      "success": false,
      "output": "============================= test session starts ==============================\nplatform darwin -- Python 3.11.6, pytest-7.4.3, pluggy-1.6.0 -- /Users/unbxd/Desktop/judwaa/airavat/airavat/bin/python\ncachedir: .pytest_cache\nrootdir: /Users/unbxd/Desktop/judwaa/airavat/ai_fastapi_agent/ai-services\nplugins: anyio-4.9.0, Faker-20.1.0, cov-4.1.0, asyncio-0.21.1, langsmith-0.4.8\nasyncio: mode=Mode.STRICT\ncollecting ... collected 1 item\n\ntest_components.py::TestGeminiService::test_gemini_initialization FAILED [100%]\n\n=================================== FAILURES ===================================\n_________________ TestGeminiService.test_gemini_initialization _________________\ntest_components.py:333: in test_gemini_initialization\n    assert \"rest\" in suggestion.lower() or \"hydration\" in suggestion.lower()\nE   AttributeError: 'coroutine' object has no attribute 'lower'\n=========================== short test summary info ============================\nFAILED test_components.py::TestGeminiService::test_gemini_initialization - At...\n============================== 1 failed in 0.89s ===============================\n",
      "errors": "sys:1: RuntimeWarning: coroutine 'get_treatment_suggestion_from_gemini' was never awaited\n"
    }
  }
}